@using ChartsMix.Models
@using Highsoft.Web.Mvc.Charts
@model LineChartModel

<div>
    @using (Html.BeginForm("Index", "Home"))
    {
        <div class="jarviswidget-editbox">
            <div class="widget-body">
                <div class="row">
                    <div class="col-md-6 form-group">
                        @Html.EnumDropDownListFor(m => m.period, "Period", new { @class = "form-control", @id = "ddlLine" })
                    </div>
                </div>
                <div class="row" id="divDateLine" style="display : none">
                    <div class="col-md-6 form-group">
                        @Html.EditorFor(m => m.From)
                    </div>
                    <div class="col-md-6 form-group">
                        @Html.EditorFor(m => m.To)
                    </div>
                </div>
                <div class="tree smart-form">
                    <ul>
                        @Html.Raw(Helpers.FormTreeView(Model.TreeRoot, "line"))
                    </ul>
                </div>
            </div>
            <input type="submit" value="Show Line Chart" />
        </div>
    }

    <div class="widget-body">
        @if (Model.Data != null)
        {
            @(Html.Highsoft().Highcharts(
                                new Highcharts
                                {
                                    Title = new Title
                                    {
                                        Text = "Monthly Average Temperature"
                                    },
                                    XAxis = new List<XAxis>
                                    {
                                        new XAxis
                                        {
                                            Categories = Model.Dates
                                        }
                                    },
                                    YAxis = new List<YAxis>
                                    {
                                        new YAxis
                                        {
                                            Title = new YAxisTitle
                                            {
                                                Text = "Temperature (°C)"
                                            }
                                        }
                                    },
                                    PlotOptions = new PlotOptions
                                    {
                                        Line = new PlotOptionsLine
                                        {
                                            DataLabels = new PlotOptionsLineDataLabels
                                            {
                                                Enabled = true
                                            },
                                            EnableMouseTracking = false
                                        }
                                    },
                                    Series = Model.Data
                                }
                                , "lineChart")
            )
        }

    </div>
    <!-- end widget content -->

</div>

