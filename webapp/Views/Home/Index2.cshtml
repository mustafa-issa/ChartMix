@using ChartsMix.Models
@using Highsoft.Web.Mvc.Charts
@model DashbordModel
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/highcharts-3d.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<!-- MAIN CONTENT -->
<div id="content">

    <!-- row -->
    <div class="row">

        <!-- col -->
        <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
            <h1 class="page-title txt-color-blueDark">

                <!-- PAGE HEADER -->
                <i class="fa fa-fw fa-bar-chart-o"></i>
                Graph
                <span>
                    >
                    Chart.js
                </span>
            </h1>
        </div>
    </div>
    <section id="widget-grid" class="">


        <div class="row">
            <article class="col-xs-12 col-sm-6 col-md-12 col-lg-12">
                <div class="jarviswidget" id="wid-id-6">
                    <header>

                        <h2>Pie Chart </h2>

                    </header>

                    <!-- widget div-->
                    <div>
                        @using (Html.BeginForm("Index", "Home"))
                        {
                            <div class="jarviswidget-editbox">
                                <div class="widget-body">
                                    <div class="tree smart-form">
                                        <ul>
                                            @Html.Raw(Helpers.FormTreeView(Model.PieModel.TreeRoot, "pie"))
                                        </ul>
                                    </div>
                                </div>
                                <input type="submit" value="Show Pie" />
                                <!-- This area used as dropdown edit box -->
                            </div>
                        }

                        <!-- widget edit box -->
                        <!-- end widget edit box -->
                        <!-- widget content -->
                        <div class="widget-body">
                            <div>
                                @if (Model.PieModel.Data != null)
                                {
                                    @(Html.Highsoft().Highcharts(
                                new Highcharts
                                {
                                    Chart = new Highsoft.Web.Mvc.Charts.Chart
                                    {
                                        Options3d = new ChartOptions3d
                                        {
                                            Enabled = true,
                                            Alpha = 45,
                                            Beta = 0
                                        }
                                    },
                                    Title = new Title
                                    {
                                        Text = DateTime.Now.ToShortDateString()
                                    },
                                    Tooltip = new Tooltip
                                    {
                                        PointFormat = "{series.name}: <b>{point.percentage:.1f}%</b>"
                                    },
                                    PlotOptions = new PlotOptions
                                    {
                                        Pie = new PlotOptionsPie
                                        {
                                            AllowPointSelect = true,
                                            Cursor = PlotOptionsPieCursor.Pointer,
                                            Depth = 35,
                                            DataLabels = new PlotOptionsPieDataLabels
                                            {
                                                Enabled = true,
                                                Format = "<b>{point.name}</b>"
                                            }
                                        }
                                    },
                                    Series = new List<Series>
                                    {
                                    new PieSeries
                                    {
                                        Name = "Browser Share",
                                        Data = Model.PieModel.Data
                                    },

                                    }
                                }
                                , "chart")
                                    )
                                }
                            </div>
                        </div>
                        <!-- end widget content -->

                    </div>
                    <!-- end widget div -->

                </div>
                <!-- end widget -->

            </article>
            <!-- WIDGET END -->

        </div>
        <div class="row">

            <!-- NEW WIDGET START -->
            <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">

                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">
                    <!-- widget options:
                    usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                    data-widget-colorbutton="false"
                    data-widget-editbutton="false"
                    data-widget-togglebutton="false"
                    data-widget-deletebutton="false"
                    data-widget-fullscreenbutton="false"
                    data-widget-custombutton="false"
                    data-widget-collapsed="true"
                    data-widget-sortable="false"

                    -->
                    <header>
                        <span class="widget-icon"> <i class="fa fa-bar-chart-o"></i> </span>
                        <h2>Bar Chart</h2>

                    </header>

                    <!-- widget div-->
                    <div>

                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->

                        </div>
                        <!-- end widget edit box -->
                        <!-- widget content -->
                        <div class="widget-body no-padding">

                            <div id="bar-chart" class="chart"></div>

                        </div>
                        <!-- end widget content -->

                    </div>
                    <!-- end widget div -->

                </div>
                <!-- end widget -->

            </article>
            <!-- WIDGET END -->

        </div>
        <div class="row">

            <!-- a blank row to get started -->
            <div class="col-sm-12">
                <!-- your contents here -->
            </div>

        </div>

        <!-- end row -->

    </section>
    <!-- end widget grid -->


</div>
<!-- END MAIN CONTENT -->

@section pagespecific {
    <script type="text/javascript">

        $(document).ready(function () {

            // PAGE RELATED SCRIPTS

            $('.tree > ul').attr('role', 'tree').find('ul').attr('role', 'group');
            $('.tree').find('li:has(ul)').addClass('parent_li').attr('role', 'treeitem').find(' > span').attr('title', 'Collapse this branch').on('click', function (e) {
                var children = $(this).parent('li.parent_li').find(' > ul > li');
                if (children.is(':visible')) {
                    children.hide('fast');
                    $(this).attr('title', 'Expand this branch').find(' > i').removeClass().addClass('fa fa-lg fa-plus-circle');
                } else {
                    children.show('fast');
                    $(this).attr('title', 'Collapse this branch').find(' > i').removeClass().addClass('fa fa-lg fa-minus-circle');
                }
                e.stopPropagation();
            });
        })

    </script>
}
